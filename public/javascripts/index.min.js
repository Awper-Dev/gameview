function toggleClassName(e,t){e.hasClass(t)?e.removeClass(t):e.addClass(t)}function submitAddress(){Swal.fire({title:"Your Servers Connection:",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Add Server",showLoaderOnConfirm:!0,preConfirm:e=>fetch("/actions/addserver",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:e})}).then(async e=>{if(!e.ok)throw new Error(await e.text());return e.text()}).catch(e=>Swal.showValidationMessage(e)),allowOutsideClick:()=>!Swal.isLoading()}).then(e=>{e.value&&(Swal.fire({title:"Added Server",text:e.value,type:"info"}),setTimeout(()=>updateServers(!1),2e3))})}function removeAddress(){Swal.fire({title:"Connection you want to remove:",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Remove Server",showLoaderOnConfirm:!0,preConfirm:e=>fetch("/actions/removeserver",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:e})}).then(async e=>{if(!e.ok)throw new Error(await e.text());return e.text()}).catch(e=>Swal.showValidationMessage(e)),allowOutsideClick:()=>!Swal.isLoading()}).then(e=>{e.value&&(Swal.fire({title:"Removed Server",text:e.value,type:"info"}),setTimeout(()=>updateServers(!1),2e3))})}function updateServers(e=!0){const t=document.querySelector("#server-table"),n=document.querySelector("#server-card"),o=document.querySelector(".main-overview");Swal.fire({toast:!0,title:"Pulling Data",position:"top-end",showConfirmButton:!1,onBeforeOpen:Swal.showLoading,type:"info"}),fetch("/actions/getservers",{method:"GET"}).then(async i=>{clearTable(t);const a=await i.json(),r=a.filter(e=>e.online);a.sort((e,t)=>e.online-t.online),o.firstElementChild.classList.remove("offline-card"),o.firstElementChild.classList.remove("online-card"),o.firstElementChild.lastElementChild.innerHTML=`${r.length} / ${a.length} Server Online`,o.firstElementChild.classList.add(r.length===a.length?"online-card":"offline-card"),a.forEach(e=>{t.appendChild(renderRow(e)),n.appendChild(t)}),setTimeout(Swal.close,500),e&&setTimeout(()=>updateServers(!0),3e5)})}function renderRow(e){const t=document.createElement("tr");return renderTableData(4,e).forEach(e=>t.appendChild(e)),t}function renderTableData(e,t){const n=[];for(let t=0;t<e;t++)n.push(document.createElement("td"));return n[0].appendChild(document.createTextNode(t.online?"✓":"✗")),n[0].classList.add(t.online?"online":"offline"),n[1].appendChild(document.createTextNode(t.ip)),n[2].appendChild(document.createTextNode(t.ping)),n[3].appendChild(document.createTextNode(t.extra||`${t.players} Players`)),n}function clearTable(e){for(let t=1;t<e.rows.length;)e.deleteRow(t)}const menuIconEl=$(".menu-icon"),sidenavEl=$(".sidenav"),sidenavCloseEl=$(".sidenav__close-icon");menuIconEl.on("click",function(){toggleClassName(sidenavEl,"active")}),sidenavCloseEl.on("click",function(){toggleClassName(sidenavEl,"active")});